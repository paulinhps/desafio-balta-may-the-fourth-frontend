@page "/vehicles"
@using MyTheFourth.Frontend.Web.Client.Pages.Components.Catalog

@inject IVehiclesService VehiclesService
@attribute [StreamRendering]

@if(Vehicles == null) 
{
    <StarWarsLoader Text="Carregando..." />
}
else 
{
    <Catalog>
        @foreach (var vehicle in Vehicles) 
        {
            <CatalogDetail ImgUrl="@vehicle.ImgUrl" Name="@vehicle.Name" Link="@($"vehicle/{vehicle.Slug ?? vehicle.Id.ToString()}")"/>
        }
    </Catalog>
}

@code {
    private IEnumerable<Vehicle>? Vehicles = null;

    protected override async Task OnInitializedAsync() {

       Vehicles = await VehiclesService.ListVehiclesAsync();
    }
}    
