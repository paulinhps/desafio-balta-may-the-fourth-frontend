@page "/characters"

@inject ICharactersService CharactersService
@attribute [StreamRendering]

@using MyTheFourth.Frontend.Web.Client.Pages.Components.Catalog

@if(Characters == null)
{
    <StarWarsLoader Text="Carregando..." />
}
else 
{
    <Catalog>
        @foreach (var character in Characters) 
        {
            <CatalogDetail ImgUrl="@character.ImgUrl" Name="@character.Name" Link="@($"characters/{character.Slug ?? character.Id.ToString()}")"/>
        }
    </Catalog>
}

@code {
    private IEnumerable<CharacterResume>? Characters = null;

    protected override async Task OnInitializedAsync() {

        Characters = await CharactersService.ListCharactersAsync();
    }
}