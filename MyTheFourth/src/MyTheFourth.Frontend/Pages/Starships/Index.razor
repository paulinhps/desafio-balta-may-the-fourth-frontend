@page "/starships"

@inject IStarshipsService StarshipsService
@attribute [StreamRendering]

@if(Starships == null) 
{
    <StarWarsLoader Text="Carregando..." />
}
else 
{
    <Catalog>
        @{            
            if (Starships == null || !Starships.Any())
                @Constants.ErrorMessages.NoContent
            else
            {
                @foreach (var starship in Starships) 
                {
                    <CatalogDetail ImgUrl="@starship.ImgUrl" Name="@starship.Name" Link="@($"starships/{starship.Slug ?? starship.Id.ToString()}")"/>
                }
            }
        }
    </Catalog>
}

@code {
    private IEnumerable<StarshipResume>? Starships = null;

    protected override async Task OnInitializedAsync() {

       Starships = await StarshipsService.ListStarshipsAsync();
    }
}    
